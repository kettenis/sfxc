TODO:

Control files
- add run option for analyses of mk4 files and print/write headers, 
  maybe in a separate application
- Set random generator with a well defined seed in the control file
  option: fixed seeding and runtime based seeding
- investigate the option to store the control files in XML format
- mark files as "file:///path/filename" in order to be able to use
  "tcp://host:port" and "mark5://host:port" later as well
- make simple functional design for ccf editor. This editor is part
  of WFM to be developed by PSNC (Dominik)
- Use a Makefile.am to generate the makefiles used by vex2ccf
- Why no random headers by default?

Correlation:
- !!! Check the integration: 512 and 1024 give a "Floating point exception"
- Document classes
- Data_writer and Output_node for collecting data
- Remove global variables
- check timestamps in the headers during correlation
- optimize code: 
  - FFTW in place,
  - std::vectors instead of arrays with fixed length
  - std::string instead of char * to ease the copy constructor
- move header_map_mk4_cx.txt to a header file
- write result from correlator as complex floats in CPF (correlator product file)

Multi core:
- use state instead of running in Data_reader2buffer (similar to B2dw)
- Data_writer similar to Data_reader
- Add Data_reader 
      Data_writer
- send time slices, manage nodes
- Get sfxc_adam working again
- schrijven van debug informatie (niet naar std::cout)
- output_stream ends after a number of send bytes, not after MPI message
  (asynchronous)

Functionality:
- add overlapping in correlation [RHJO]
- add filtering before delay correction [RHJO]
- Convertor: from correlator product to Measurement Set format. [RHJO]
  Develop separate application or integrate whith correlator software

Documentation
- high level design document, describing what happens and how
  it happens in the sw correlator. See also deliverable DJ 1.4
  in DoW. [RHJO]
- Write doxygen code for the control parameters

Test:
- Complete test_suite
- add .sfxcrc file with control information per computer


Testing, test scenarios:
- process different kinds of experiments and check analyse their results
  - An experiment with upper and lower side band
  - Process some of the recent VLBI fringe tests (03-2007)
  

Performance and Optimization
- run benchmark tests on various machines
- add and refine timing in sfxc

Future (possible) developments and design issues
- current sfxc (31-1-2007) can correlate only one channel. Should there be a
  multi channel version
- A vex file can describe more than one mode. Should sfxc be able to handle
  more modes
- in the current design one correlator node has all the functionality 
  (channel extraction, delay correction, correlation). Only one channel is
  processed others are neglected. Analyse other architectures. Where should 
  the conversion from bit to float take place? 
- Calculation of the delay model: make a separate easy to use application
  or integrate it with sfxc. Consult Mark K when starting.

Questions:
- Why are parabCoefs and getDelayLine not members of DelayTable?

Repository
- add cxmk4, cx2fl, delpha, sfxct including its control files
  this is the original sw correlator
- add data directory, in this directory are control and vex files


STATUS:
If an action item is not mentioned nothing is done yet.
Copy action item to this list and describe status (date, who, what)

1. [RHJO, 11-01-2007] 
  - high level documentation document, describing what happens and how
  it happens in the sw correlator. See also deliverable DJ 1.4
  in DoW. [RHJO]
4. [RHJO, 22-11-2007]
   - investigate to store the control files in XML format. Started with xml 
     design. Stop gap job, low priority. See e-mail exchange with Dominik from
     PSNC
5. [RHJO, 22-11-2007]
   - Convertor: from correlator product (CP)to FITS format. After consulting 
   Harro we should convert CP to measurement sets (MS). Advantages:
   a) more flexible way of data storing
   b) Harro has sw able to write MS he only needs to know the CP format and 
      write appropriate CP reading sw
   [13-03-2007]
   Harro started working on a CPF to MS convertor
7. [RHJO, 26-02-2007] 
   - Remove global variables: These have been removed in the new correlator
     classes, but in some places they have to be maintained until old code 
     is depricated

     

1. [YP, 11-01-2007] Make fringe plots from the correlator output
2. [YP, 11-01-2007] Make a utility to transfer the correlator output to FITS


3. [NGHK, 11-01-2007]
   - Data_writer and Output_node for collecting data
4. [NGHK, 11-01-2007]
   - Connect all nodes using a controller node


DONE:
Move action item from TODO list to DONE list
- [RHJO, 30-01-2007] Control files: which parameters can be extracted 
  from vex file
- [RHJI, 02-03-2007] !!! Check cross correlation for fringes. 
  Fringes now present. They were absent because of difference in interpretation 
  of Local Oscilator frequency by RHJO and SP. 
- [RHJO, 02-03-2007] create a Correlator class with status functions. 
  Three classes designed and implemented: 
  CorrelatorCore, DelayCorrection, TScorrelator  
  A new main sfxc_SC.cc for single core processing is developed
- [RHJO, 02-03-2007] are all processing steps necessary, which steps do and 
  do not contribute to the end result. Discussed this with MK and SP. 
  Conclusion for the time being do not change the delay correction and 
  correlation algorithms. Make current algorithms work and an a later stage
  design new algorithms, implement these in different applications or ad run
  options to current implementation.
- [RHJO, 06-03-2007] application written for fringe analysis using the sfxc 
  result output files. SP gave advise on this. This utility is under svn
- [RHJO, 14-03-2007] CCF check for redundancies and remove them.
- [RHJO, 14-03-2007] rename certain keywords in control file to more meaningful names
  and synchronize these keywords with the ones generated by vex2ccf.
  vex2ccf and the CCF parser in sfxc have been tuned. Keywords have been given
  more meaningfull names
- [RHJO, 14-03-2007] Correlation: Parameters: welke wordt waar gebruikt, gezet? Documentatie
- [RHJO, 30-03-2007] Questions from Nico have been solved:
  - General: How do I use the classes?
    1. Initialise TScorrelator
      - Set the parameters
      - Set the delay table
      - Set the input and output writers
    2. WHILE there are time slices to be processed DO
      - Initialise time slice (set start time and duration)
      - Correlate the time slice
      - Stop the correlation (send the output?)
    3. Stop TScorrelator (destructor)
       
  - A function to change the starttime for a new time slice in TScorrelator
  - How can I use my own delay table (transferred with MPI)?
  - Why do you use startTS instead of increasing the start time and decreasing the duration?
  - Why does CorrelateTimeSlice() get readers and StaPrms?





- [NGHK, 17-01-2007] Log_writer and Log_node for writing logging information
- [NGHK, 16-01-2007] Write doxygen code for the control parameters
- [NGHK, 16-01-2007] delayTable: use milliseconds instead of seconds for time
  [NGHK, 15-01-2007] Remove global variables
- [NGHK, 12-01-2007] switch to svn
- [NGHK, 11-01-2007] Send messages for control parameters (MPI version).
- [NGHK, 11-01-2007] Create a utility directory (c2f, etc.)
